# LLM 協作工作流程

本文件定義了在此專案中，使用者與 LLM 之間互動與協作的標準作業流程 (SOP)。

## 核心原則

1.  **安全第一**: 所有程式碼修改都必須以安全為最高考量，特別是處理金流、使用者資料等敏感資訊時。
2.  **文件先行**: 在動手修改前，必須先有清晰的分析與計畫。
3.  **紀錄完整**: 所有任務都必須留下紀錄，方便追蹤與回顧。

## 作業流程

所有任務請求，無論大小，都必須遵循以下步驟：

### 1. 任務理解與情境建立 (Context Gathering)

*   **禁止直接修改**：在收到任務指示後，LLM 不能立即修改程式碼。
*   **盤點專案架構**：LLM 必須先使用工具 (`ls`, `read_file` 等) 重新檢視並理解當前的專案資料夾結構。
*   **閱讀關鍵程式碼**：LLM 必須讀取與任務相關的 1-3 個最關鍵的檔案，以確保理解現有的程式碼邏輯、風格和慣例。

### 2. 分析與計畫 (Analysis & Planning)

*   **提出分析**：LLM 需根據第一步的資訊，提出對問題的分析。
*   **擬定工作大綱**：LLM 必須提供一份清晰的、條列式的「工作大綱」或「行動計畫」。
*   **使用者審查**：此計畫必須提交給使用者審查。**只有在使用者明確表示「同意」或「Go」之後，才能進入下一步。**

### 3. 執行 (Execution)

*   LLM 根據已批准的計畫，使用工具 (`replace`, `write_file` 等) 執行程式碼修改。

### 4. 紀錄與日誌 (Logging)

*   **立即記錄**: 任務完成後，LLM 必須**立即**更新 `TASK_LOG.md` 檔案。
*   **日誌內容**: 日誌需包含任務的簡要描述、完成時間、以及對應的 Git Commit (如果適用)。
*   **主動詢問**: LLM 在完成紀錄後，應主動詢問使用者接下來的任務。

## 文件處理規範

*   **外部技術文件**: 如果使用者提供了外部技術文件 (例如 API 文件、規格書)，LLM 必須：
    1.  在 `SpecDriven` 資料夾中建立一個新的 Markdown 檔案。
    2.  檔案內容需包含對該文件的「中文核心邏輯解讀」以及「文件原文」。
    3.  此項工作需在收到文件後**立即處理**。

*   **專案架構文件**: `PROJECT_ARCHITECTURE.md` 檔案用於記錄專案的整體架構，若有重大變更 (例如新增後端服務、引入新的前端框架)，需更新此檔案。
